<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BTC Predictor v12 - Live 24/7</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        h1 {
            text-align: center;
            color: #1e3c72;
            margin-bottom: 10px;
            font-size: 32px;
        }
        
        .version {
            text-align: center;
            color: #666;
            font-size: 14px;
            margin-bottom: 30px;
        }
        
        .price-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .price-label {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 10px;
        }
        
        .price-value {
            font-size: 48px;
            font-weight: bold;
        }
        
        .prediction-box {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
        }
        
        .prediction-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
        }
        
        .prediction-value {
            font-size: 32px;
            font-weight: bold;
            color: #1e3c72;
        }
        
        .regime {
            display: inline-block;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin-top: 10px;
        }
        
        .regime.ranging {
            background: #ffc107;
            color: #000;
        }
        
        .regime.trending {
            background: #28a745;
            color: white;
        }
        
        .stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }
        
        .stat-box {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e0e0e0;
        }
        
        .stat-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #1e3c72;
        }
        
        .status {
            text-align: center;
            padding: 15px;
            background: #e3f2fd;
            border-radius: 10px;
            margin-top: 20px;
            font-size: 14px;
            color: #1976d2;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .footer {
            text-align: center;
            margin-top: 30px;
            font-size: 12px;
            color: #666;
        }
        
        .error {
            background: #ffebee;
            color: #c62828;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ BTC Predictor</h1>
        <div class="version">v12.0 Ultimate - Live 24/7 on Vercel</div>
        
        <div id="loading" class="loading">
            <div class="spinner"></div>
            <p>Fetching Bitcoin data...</p>
        </div>
        
        <div id="content" style="display: none;">
            <div class="price-box">
                <div class="price-label">Current Bitcoin Price</div>
                <div class="price-value" id="currentPrice">$--</div>
            </div>
            
            <div class="prediction-box">
                <div class="prediction-label">5-Minute Prediction</div>
                <div class="prediction-value" id="predictedPrice">$--</div>
                <div class="prediction-label" style="margin-top: 10px;">
                    Direction: <span id="direction" style="font-weight: bold;">--</span>
                </div>
                <span id="regime" class="regime ranging">RANGING</span>
            </div>
            
            <div class="stats">
                <div class="stat-box">
                    <div class="stat-label">Accuracy</div>
                    <div class="stat-value" id="accuracy">--%</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Predictions</div>
                    <div class="stat-value" id="totalPredictions">0</div>
                </div>
            </div>
            
            <div class="status" id="status">
                üß† Collecting data for predictions...
            </div>
        </div>
        
        <div id="error" class="error" style="display: none;">
            ‚ö†Ô∏è Unable to fetch Bitcoin data. Please refresh the page.
        </div>
        
        <div class="footer">
            Deployed on Vercel ‚Ä¢ Updates every 2 minutes ‚Ä¢ Free Forever
        </div>
    </div>
    
    <script>
        // Bitcoin Predictor Logic
        const PYTH_ID = '0xe62df6c8b4a85fe1a67db44dc12de5db330f7ac66b72dc658afedf0f4a415b43';
        const UPDATE_INTERVAL = 120000; // 2 minutes
        
        let history = [];
        let predictions = [];
        let stats = {
            totalPredictions: 0,
            correctPredictions: 0,
            accuracy: 0
        };
        
        // Fetch Bitcoin price from Pyth Network
        async function fetchBTCPrice() {
            try {
                const response = await fetch(`https://hermes.pyth.network/api/latest_price_feeds?ids[]=${PYTH_ID}`);
                const data = await response.json();
                
                if (data && data[0] && data[0].price) {
                    const price = parseFloat(data[0].price.price) * Math.pow(10, data[0].price.expo);
                    return price;
                }
                
                // Fallback to Binance
                const binanceResponse = await fetch('https://api.binance.com/api/v3/ticker/price?symbol=BTCUSDT');
                const binanceData = await binanceResponse.json();
                return parseFloat(binanceData.price);
            } catch (error) {
                console.error('Error fetching price:', error);
                return null;
            }
        }
        
        // Calculate technical indicators
        function calculateIndicators(prices) {
            if (prices.length < 14) return null;
            
            const current = prices[prices.length - 1];
            const previous = prices[prices.length - 2];
            
            // Simple trend
            const trend = ((current - previous) / previous) * 100;
            
            // Simple momentum
            const momentum = prices.length >= 5 ? 
                ((current - prices[prices.length - 5]) / prices[prices.length - 5]) * 100 : 0;
            
            return { trend, momentum };
        }
        
        // Make prediction
        function makePrediction(currentPrice, indicators) {
            if (!indicators) return null;
            
            // Simple prediction based on trend and momentum
            const signal = (indicators.trend * 0.6) + (indicators.momentum * 0.4);
            const predictedChange = signal * 0.5; // Dampen the prediction
            const predictedPrice = currentPrice * (1 + predictedChange / 100);
            
            return {
                price: predictedPrice,
                change: predictedChange,
                direction: predictedChange > 0 ? 'UP ‚¨ÜÔ∏è' : 'DOWN ‚¨áÔ∏è',
                regime: Math.abs(signal) > 0.3 ? 'trending' : 'ranging'
            };
        }
        
        // Update UI
        function updateUI(currentPrice, prediction) {
            document.getElementById('currentPrice').textContent = `$${currentPrice.toFixed(2)}`;
            
            if (prediction) {
                document.getElementById('predictedPrice').textContent = `$${prediction.price.toFixed(2)}`;
                document.getElementById('direction').textContent = prediction.direction;
                document.getElementById('direction').style.color = prediction.change > 0 ? '#28a745' : '#dc3545';
                
                const regimeEl = document.getElementById('regime');
                regimeEl.textContent = prediction.regime.toUpperCase();
                regimeEl.className = `regime ${prediction.regime}`;
                
                document.getElementById('status').textContent = 'üöÄ Active predictions running';
            } else {
                document.getElementById('status').textContent = 'üß† Collecting data for predictions...';
            }
            
            document.getElementById('accuracy').textContent = stats.accuracy.toFixed(1) + '%';
            document.getElementById('totalPredictions').textContent = stats.totalPredictions;
        }
        
        // Main update function
        async function update() {
            try {
                const price = await fetchBTCPrice();
                
                if (price) {
                    history.push(price);
                    if (history.length > 100) history.shift();
                    
                    const indicators = calculateIndicators(history);
                    const prediction = indicators ? makePrediction(price, indicators) : null;
                    
                    updateUI(price, prediction);
                    
                    document.getElementById('loading').style.display = 'none';
                    document.getElementById('content').style.display = 'block';
                    document.getElementById('error').style.display = 'none';
                } else {
                    document.getElementById('loading').style.display = 'none';
                    document.getElementById('error').style.display = 'block';
                }
            } catch (error) {
                console.error('Update error:', error);
                document.getElementById('loading').style.display = 'none';
                document.getElementById('error').style.display = 'block';
            }
        }
        
        // Initialize
        update();
        setInterval(update, UPDATE_INTERVAL);
    </script>
</body>
</html>